# Персонаж
define norr = Character('', what_color="#6b3fa0")
define e = Character('Вы', color="#00bfff")
define r = Character('Геннадий', color="#00bfff", what_slow_cps = 15, what_size=40)
define ruqa = Character('Руководитель', color="#9a0e2a", what_slow_cps = 15, what_size=40)


default kr_schet = 0
default ct_schet = 0
default sh_schet = 0


default schet = 0

default name = ""
default surname = ""
default otch = ""


init python:
    def randL():
        import random
        locs = ["h1", "h2", "h3", "h4", "h5", "h6", "h7", "h8", "h9"]
        nums = ["1", "2", "3", "4", "5", "6", "7", "8", "9"]

        random.shuffle(locs)
        random.shuffle(nums)

        # Присваиваем каждой кнопке свою локацию
        renpy.store.hn_1 = nums[0]
        renpy.store.hn_2 = nums[1]
        renpy.store.hn_3 = nums[2]
        renpy.store.hn_4 = nums[3]
        renpy.store.hn_5 = nums[4]
        renpy.store.hn_6 = nums[5]
        renpy.store.hn_7 = nums[6]
        renpy.store.hn_8 = nums[7]
        renpy.store.hn_9 = nums[8]

        renpy.store.l_1 = locs[0]
        renpy.store.l_2 = locs[1]
        renpy.store.l_3 = locs[2]
        renpy.store.l_4 = locs[3]
        renpy.store.l_5 = locs[4]
        renpy.store.l_6 = locs[5]
        renpy.store.l_7 = locs[6]
        renpy.store.l_8 = locs[7]
        renpy.store.l_9 = locs[8]

# Вместо использования оператора image можете просто
# складывать все ваши файлы изображений в папку images.
# Например, сцену bg room можно вызвать файлом "bg room.png",
# а eileen happy — "eileen happy.webp", и тогда они появятся в игре.

# Игра начинается здесь:


label start:
    $ randL()
    call screen input_fio_screen
    play music work_b fadein 1.0
    "*Ранним утром, взбодренные поездкой в общественном транспорте, вы, как обычно, включили свой рабочий компьютер и открыли корпоративную почту.*"
    "*На глаза вам сразу же попадается сообщение от начальника с пометкой 'Важное'.*"

    show office with fade

    call mini_game_screen

    r "Доброе утро, напарник!"
    r "Вижу, ты уже закончил со своим участком, это очень вовремя"
    r "Руководство зовет нас с тобой на инструктаж, кажется, сегодня будет рабочий выезд"
    hide office with fade
    jump instr

label instr:
    show proj with fade
    pause 1.0
    show proj_d
    pause 1.0
    show proj_w with  dissolve
    ruqa "Доброе утро, Геннадий"
    ruqa "Доброе утро, [name]"
    ruqa "Сегодня вы направляетесь в плановую выездную проверку корректности учёта электроэнергии в населённых пунктах, подключённых к единому вводу"
    ruqa "Цель проверки – выявление возможных нарушений при эксплуатации приборов учёта, включая несанкционированные вмешательства и искажение данных"
    ruqa "Прошу вас отнестись к задаче с максимальной ответственностью. Ваша работа напрямую влияет на достоверность коммерческого учёта и, как следствие, на финансовые показатели предприятия"
    ruqa "Не забудьте надеть униформу и взять необходимые приборы"
    ruqa "На что первым делом обращать внимание:"
    ruqa "1. Наброс провода"
    ruqa "2. Схемы подключения счётчиков. Они указаны в паспортах на счётчик. Всё, что не соответствует схеме - нарушение"
    ruqa "3. Магниты на счётчиках"
    ruqa "В случае чего, для проверки счётчика используйте прибор"
    ruqa "В жилое помещение разрешается входить только в присутствии совершеннолетнего собственника или его уполномоченного представителя"
    ruqa "В случае отказа в допуске – не настаивайте и не предпринимайте попыток проникновения. Зафиксируйте факт отказа в акте осмотра"
    ruqa "Обязательно запросите у потребителя паспорт на прибор учёта и проведите сопоставление схемы подключения, указанной в паспорте, с фактической схемой в распределительном щитке"
    ruqa "Любое несоответствие подлежит документальному оформлению"
    ruqa "Особое внимание уделите безопасности: во многих домовладениях содержатся собаки. Не входите во дворы, где присутствуют животные, без визуального контакта с владельцами"
    ruqa "Для вызова хозяев используйте громкий, но корректный голосовой контакт с безопасного расстояния"
    ruqa "По завершении обхода нанесите маршрут проверки на схему населённого пункта и оформите служебный отчёт в установленной форме"
    ruqa "Всё понятно?"
    r "Цель - ясна! Мы выдвигаемся"

label end:

    stop music

    scene black with Dissolve(0.5)

    play sound door6

    $ renpy.pause(3.0, hard=True)

    play audio cardrivingaway2

    $ renpy.pause(15.0, hard=True)

    jump start_vil


